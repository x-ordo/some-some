#!/bin/bash
#
# Pre-commit hook for ì¸ì¸ (Thumb Some)
# Automatically formats Dart code using dart format before committing
#
# This ensures all commits comply with Dart style guide and pass CI formatting checks.

echo "ğŸ¨ Running dart format..."

# Check if dart is available
if ! command -v dart &> /dev/null; then
    echo "âš ï¸  Warning: dart command not found. Skipping formatting."
    echo "   Install Dart SDK to enable automatic formatting."
    exit 0
fi

# Run dart format on all Dart files
dart format .

# Check if there were any changes
if [[ -n $(git diff --name-only) ]]; then
    echo "âœ… Code formatted successfully"

    # Stage the formatted files
    git add -u

    echo "ğŸ“ Formatted files have been staged"
else
    echo "âœ¨ Code already properly formatted"
fi

exit 0
